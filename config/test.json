{
    "Comment": "Configuration automated testing of APTrust services. Run `go test ./...`",

    "TarDirectory": "~/tmp/test_tar",
    "LogDirectory": "~/tmp/test_log",
    "RestoreDirectory": "~/tmp/test_restore",
    "ReplicationDirectory": "~/tmp/test_replicate",
    "MaxFileSize": 100000000,
    "SkipAlreadyProcessed": true,
    "DeleteOnSuccess": false,
    "LogToStderr": true,
    "VolumeServicePort": 8898,
    "LogLevel": 4,
    "BucketReaderCacheHours": 24,
    "BagValidationConfigFile": "config/aptrust_bag_validation_config.json",

    "PharosURL": "http://localhost:3000",
    "PharosAPIVersion": "v2",

    "NsqdHttpAddress": "http://localhost:4151",
    "NsqLookupd": "localhost:4161",

    "APTrustS3Region": "us-east-1",
    "APTrustGlacierRegion": "us-west-2",
    "PreservationBucket": "aptrust.test.preservation",
    "ReplicationBucket": "aptrust.test.preservation.oregon",
    "CustomRestoreBucket": "aptrust.test.restore",
    "DPNPreservationBucket": "aptrust.dpn.test",
    "RestoreToTestBuckets": false,
    "MaxDaysSinceFixityCheck": 60,

    "FetchWorker": {
        "NetworkConnections": 4,
        "Workers": 4,
        "NsqTopic": "fetch_topic",
        "NsqChannel": "fetch_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "180m"
    },

    "StoreWorker": {
        "NetworkConnections": 4,
        "Workers": 8,
        "NsqTopic": "store_topic",
        "NsqChannel": "store_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "180m"
    },

    "RecordWorker": {
        "NetworkConnections": 4,
        "Workers": 4,
        "NsqTopic": "record_topic",
        "NsqChannel": "record_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "180m"
    },

    "ReplicationWorker": {
        "NetworkConnections": 4,
        "Workers": 8,
        "NsqTopic": "replication_topic",
        "NsqChannel": "replication_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "180m"
    },

    "FailedReplicationWorker": {
        "NetworkConnections": 4,
        "Workers": 1,
        "NsqTopic": "failed_replication_topic",
        "NsqChannel": "failed_replication_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "5m"
    },

    "RestoreWorker": {
        "NetworkConnections": 4,
        "Workers": 8,
        "NsqTopic": "restore_topic",
        "NsqChannel": "restore_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "180m"
    },

    "FileDeleteWorker": {
        "NetworkConnections": 4,
        "Workers": 4,
        "NsqTopic": "file_delete_topic",
        "NsqChannel": "file_delete_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "30m"
    },

    "TroubleWorker": {
        "NetworkConnections": 1,
        "Workers": 1,
        "NsqTopic": "trouble_topic",
        "NsqChannel": "trouble_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "10m"
    },

    "FixityWorker": {
        "NetworkConnections": 4,
        "Workers": 4,
        "NsqTopic": "fixity_topic",
        "NsqChannel": "fixity_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "180m"
    },

    "FailedFixityWorker": {
        "NetworkConnections": 1,
        "Workers": 1,
        "NsqTopic": "failed_fixity_topic",
        "NsqChannel": "failed_fixity_channel",
        "MaxAttempts": 3,
        "MaxInFlight": 20,
        "HeartbeatInterval": "10s",
        "ReadTimeout": "60s",
        "WriteTimeout": "10s",
        "MessageTimeout": "3m"
    },

    "ReceivingBuckets": [
        "aptrust.receiving.test.columbia.edu",
        "aptrust.receiving.test.georgetown.edu",
        "aptrust.receiving.test.indiana.edu",
        "aptrust.receiving.test.jhu.edu",
        "aptrust.receiving.test.miami.edu",
        "aptrust.receiving.test.ncsu.edu",
        "aptrust.receiving.test.psu.edu",
        "aptrust.receiving.test.syr.edu",
        "aptrust.receiving.test.test.edu",
        "aptrust.receiving.test.uc.edu",
        "aptrust.receiving.test.uchicago.edu",
        "aptrust.receiving.test.uconn.edu",
        "aptrust.receiving.test.umd.edu",
        "aptrust.receiving.test.umich.edu",
        "aptrust.receiving.test.unc.edu",
        "aptrust.receiving.test.nd.edu",
        "aptrust.receiving.test.virginia.edu",
        "aptrust.receiving.test.vt.edu"
    ],

    "DPN": {
        "StagingDirectory": "~/tmp/dpn_staging",
        "RemoteNodeHomeDirectory": "~/tmp/dpn_home",
        "LocalNode": "aptrust",
        "LogDirectory": "~/tmp/logs",
        "LogLevel": 4,
        "LogToStderr": false,
        "ReplicateToNumNodes": 2,
        "DPNAPIVersion": "api-v2",
        "AcceptInvalidSSLCerts": true,
        "UseSSHWithRsync": false,
        "DPNGlacierRegion": "us-east-1",
        "BagValidationConfigFile": "config/dpn_bag_validation_config.json",
        "RestClient": {
            "Comment": "Settings for our local DPN REST API server. Load LocalAuthToken from environment!",
            "LocalServiceURL": "http://localhost:3001",
            "LocalAPIRoot": "api-v2",
            "LocalAuthToken": "aptrust_token"
        },
        "DefaultMetadata": {
            "Comment": "Config settings for common DPN bagit metadata",
            "BagItVersion": "0.97",
            "BagItEncoding": "UTF-8",
            "IngestNodeName": "APTrust",
            "IngestNodeAddress": "160 McCormick Rd., Charlottesville, VA 22904",
            "IngestNodeContactName": "APTrust Administrator",
            "IngestNodeContactEmail": "help@aptrust.org"
        },
        "RemoteNodeAdminTokensForTesting": {
            "chron": "chron_token",
            "hathi": "hathi_token",
            "sdr":   "sdr_token",
            "tdr":   "tdr_token"
        },
        "RemoteNodeTokens": {
            "chron": "aptrust_token",
            "hathi": "aptrust_token",
            "sdr":   "aptrust_token",
            "tdr":   "aptrust_token"
        },
        "RemoteNodeURLs": {
            "chron": "http://localhost:3002",
            "hathi": "http://localhost:3003",
            "sdr":   "http://localhost:3004",
            "tdr":   "http://localhost:3005"
        },
        "DPNPackageWorker": {
            "NetworkConnections": 8,
            "Workers": 4,
            "NsqTopic": "dpn_package_topic",
            "NsqChannel": "dpn_package_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "180m"
        },
        "DPNValidationWorker": {
            "NetworkConnections": 8,
            "Workers": 4,
            "NsqTopic": "dpn_validation_topic",
            "NsqChannel": "dpn_validation_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "180m"
        },
        "DPNCopyWorker": {
            "NetworkConnections": 8,
            "Workers": 4,
            "NsqTopic": "dpn_copy_topic",
            "NsqChannel": "dpn_copy_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "180m"
        },
        "DPNStoreWorker": {
            "NetworkConnections": 4,
            "Workers": 4,
            "NsqTopic": "dpn_store_topic",
            "NsqChannel": "dpn_store_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "180m"
        },
        "DPNRecordWorker": {
            "NetworkConnections": 4,
            "Workers": 4,
            "NsqTopic": "dpn_record_topic",
            "NsqChannel": "dpn_record_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "180m"
        },
        "DPNRestoreWorker": {
            "NetworkConnections": 4,
            "Workers": 4,
            "NsqTopic": "dpn_restore_topic",
            "NsqChannel": "dpn_restore_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "180m"
        },
        "DPNTroubleWorker": {
            "NetworkConnections": 4,
            "Workers": 4,
            "NsqTopic": "dpn_trouble_topic",
            "NsqChannel": "dpn_trouble_channel",
            "MaxAttempts": 3,
            "MaxInFlight": 20,
            "HeartbeatInterval": "10s",
            "ReadTimeout": "60s",
            "WriteTimeout": "10s",
            "MessageTimeout": "10m"
        }
    }
}
